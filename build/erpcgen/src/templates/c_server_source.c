/*
 * AUTOMATICALLY GENERATED FILE - DO NOT EDIT
 */

// Generated from /home/patrick/erpc/server/ra_wifi_erpc_server/r_wifi_erpc_server/erpc/erpcgen/src/templates/c_server_source.template
extern const char * const kCServerSource;

const char * const kCServerSource = 
"{% if mlComment != \"\" %}\n"
"{$mlComment}\n"
"\n"
"{% endif %}\n"
"{$commonHeader()}\n"
"{% set source = \"server\" >%}\n"
"\n"
"#include <new>\n"
"#include \"{$serverCHeaderName}\"\n"
"#include \"{$serverCppHeaderName}\"\n"
"#include \"erpc_manually_constructed.hpp\"\n"
"{% set utils = false >%}\n"
"{% for iface in group.interfaces %}\n"
"{%  if (count(iface.callbacksAll) > 0) && (utils == false) %}\n"
"#include \"erpc_utils.hpp\"\n"
"{%   set utils = true >%}\n"
"{%  endif %}\n"
"{% endfor %}\n"
"\n"
"using namespace erpc;\n"
"using namespace std;\n"
"{$usingNamespace() >}\n"
"{% for iface in group.interfaces %}\n"
"{%  if count(iface.callbacksAll) > 0 %}\n"
"\n"
"{%   for cb in iface.callbacksAll %}\n"
"static const {$cb.name} _{$cb.name}[{$count(cb.callbacks)}] = { {%    for c in cb.callbacks %}{$c.name}{%     if !loop.last %}, {%     endif -- loop.last %}{%    endfor -- f.callbacks %} };\n"
"{%   endfor %}\n"
"{%  endif %}\n"
"{% endfor %}\n"
"{% for iface in group.interfaces %}\n"
"\n"
"class {$iface.serverClassName}: public {$iface.interfaceClassName}\n"
"{\n"
"    public:\n"
"        virtual ~{$iface.serverClassName}() {};\n"
"\n"
"{%  for fn in iface.functions %}\n"
"\n"
"        {$fn.prototypeInterface}\n"
"        {\n"
"{%   if count(fn.callbackParameters) > 0 %}\n"
"            uint16_t _fnIndex;\n"
"{%    for cb in fn.callbackParameters%}\n"
"            ::{$cb.type} _{$cb.name} = NULL;\n"
"{%    endfor %}\n"
"{%   endif %}\n"
"{%   if fn.returnValue.type.isNotVoid %}\n"
"            {$fn.returnValue.resultVariable}{% if fn.returnValue.isNullReturnType %} = NULL{% endif %};\n"
"{%   endif %}\n"
"{%   if count(fn.callbackParameters) > 0 %}\n"
"{%    for cb in fn.callbackParameters if cb.in %}\n"
"\n"
"            if ({% if cb.interface != \"\"%}{$cb.interface}{% else %}{$iface.interfaceClassName}{% endif %}::get_callbackIdx_{$cb.type}(&{$cb.name}, _fnIndex))\n"
"            {\n"
"                _{$cb.name}=::_{$cb.type}[_fnIndex];\n"
"            }\n"
"{%    endfor %}\n"
"\n"
"{%   endif%}\n"
"            {% if fn.returnValue.type.isNotVoid %}result = {% endif %}::{$fn.name}({% for param in fn.parameters %}{% if !loop.first %}, {% endif %}{$param.pureNameC}{% endfor %});\n"
"{%   for cb in fn.callbackParameters if cb.out %}\n"
"\n"
"            if (findIndexOfFunction((arrayOfFunctionPtr_t)::_{$cb.type}, sizeof(::_{$cb.type})/sizeof(::{$cb.type}), (functionPtr_t)_{$cb.name}, _fnIndex))\n"
"            {\n"
"                {% if cb.interface != \"\"%}{$cb.interface}{% else %}{$iface.interfaceClassName}{% endif %}::get_callbackAddress_{$cb.type}(_fnIndex, {$cb.name});\n"
"            }\n"
"{%   endfor %}\n"
"{%   if fn.returnValue.type.isNotVoid %}\n"
"\n"
"            return result;\n"
"{%   endif %}\n"
"        }\n"
"{%  endfor -- fn %}\n"
"};\n"
"\n"
"ERPC_MANUALLY_CONSTRUCTED_STATIC({$iface.serviceClassName}, s_{$iface.serviceClassName});\n"
"ERPC_MANUALLY_CONSTRUCTED_STATIC({$iface.serverClassName}, s_{$iface.serverClassName});\n"
"\n"
"erpc_service_t create_{$iface.serviceClassName}(void)\n"
"{\n"
"    erpc_service_t service;\n"
"\n"
"#if ERPC_ALLOCATION_POLICY == ERPC_ALLOCATION_POLICY_DYNAMIC\n"
"    service = new (nothrow) {$iface.serviceClassName}(new (nothrow){$iface.serverClassName}());\n"
"#else\n"
"    if (s_{$iface.serviceClassName}.isUsed())\n"
"    {\n"
"        service = NULL;\n"
"    }\n"
"    else\n"
"    {\n"
"        s_{$iface.serverClassName}.construct();\n"
"        s_{$iface.serviceClassName}.construct(s_{$iface.serverClassName}.get());\n"
"        service = s_{$iface.serviceClassName}.get();\n"
"    }\n"
"#endif\n"
"\n"
"    return service;\n"
"}\n"
"\n"
"void destroy_{$iface.serviceClassName}(erpc_service_t service)\n"
"{\n"
"#if ERPC_ALLOCATION_POLICY == ERPC_ALLOCATION_POLICY_DYNAMIC\n"
"    if (service)\n"
"    {\n"
"        delete ({$iface.serverClassName} *)((({$iface.serviceClassName} *)service)->getHandler());\n"
"        delete ({$iface.serviceClassName} *)service;\n"
"    }\n"
"#else\n"
"    (void)service;\n"
"    erpc_assert(service == s_{$iface.serviceClassName}.get());\n"
"    s_{$iface.serviceClassName}.destroy();\n"
"    s_{$iface.serverClassName}.destroy();\n"
"#endif\n"
"}\n"
"\n"
"{% endfor -- iface %}\n"
;

